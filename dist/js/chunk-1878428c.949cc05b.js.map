{"version":3,"sources":["webpack:///./src/views/order/ddlOrder.vue?65ca","webpack:///src/views/order/ddlOrder.vue","webpack:///./src/views/order/ddlOrder.vue?0ddf","webpack:///./src/views/order/ddlOrder.vue","webpack:///./src/views/order/ddlOrder.vue?2a01"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","slot","_v","staticClass","ref","formItem","ruleValidate","on","fetchSource","model","value","callback","$$v","$set","expression","_l","fetchData","i","key","_s","fetchBase","fetchTable","item","$event","fetchStruct","clearForm","invalidDate","delay","tabs","editorInit","setCompletions","formDynamic","testColumns","testResults","loading","testSql","merge","beauty","validate_gen","commitOrder","fieldColumns","fieldData","idxColums","idxData","staticRenderFns","component"],"mappings":"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","file":"js/chunk-1878428c.949cc05b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Icon',{attrs:{\"type\":\"ios-redo\"}}),_vm._v(\"\\n          选择数据库\\n        \")],1),_c('div',{staticClass:\"edittable-test-con\"},[_c('Form',{ref:\"formItem\",attrs:{\"model\":_vm.formItem,\"label-width\":100,\"rules\":_vm.ruleValidate}},[_c('Form-item',{attrs:{\"label\":\"环境:\",\"prop\":\"idc\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择\"},on:{\"on-change\":_vm.fetchSource},model:{value:(_vm.formItem.idc),callback:function ($$v) {_vm.$set(_vm.formItem, \"idc\", $$v)},expression:\"formItem.idc\"}},_vm._l((_vm.fetchData.idc),function(i){return _c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(i))])}),1)],1),_c('Form-item',{attrs:{\"label\":\"连接名称:\",\"prop\":\"source\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择\"},on:{\"on-change\":_vm.fetchBase},model:{value:(_vm.formItem.source),callback:function ($$v) {_vm.$set(_vm.formItem, \"source\", $$v)},expression:\"formItem.source\"}},_vm._l((_vm.fetchData.source),function(i){return _c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(i)+\"\\n                \")])}),1)],1),_c('Form-item',{attrs:{\"label\":\"数据库库名:\",\"prop\":\"database\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择\"},on:{\"on-change\":_vm.fetchTable},model:{value:(_vm.formItem.database),callback:function ($$v) {_vm.$set(_vm.formItem, \"database\", $$v)},expression:\"formItem.database\"}},_vm._l((_vm.fetchData.base),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_c('Form-item',{attrs:{\"label\":\"数据库表名:\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formItem.table),callback:function ($$v) {_vm.$set(_vm.formItem, \"table\", $$v)},expression:\"formItem.table\"}},_vm._l((_vm.fetchData.table),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_c('Form-item',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.fetchStruct()}}},[_vm._v(\"获取表结构信息\")]),_c('Button',{staticClass:\"margin-left-10\",attrs:{\"type\":\"error\"},on:{\"click\":function($event){return _vm.clearForm()}}},[_vm._v(\"重置\")])],1),_c('FormItem',{attrs:{\"label\":\"工单提交说明:\",\"prop\":\"text\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入工单说明\",\"type\":\"textarea\",\"rows\":4},model:{value:(_vm.formItem.text),callback:function ($$v) {_vm.$set(_vm.formItem, \"text\", $$v)},expression:\"formItem.text\"}})],1),_c('FormItem',{attrs:{\"label\":\"审核人:\",\"prop\":\"assigned\"}},[_c('Select',{attrs:{\"transfer\":\"\"},model:{value:(_vm.formItem.assigned),callback:function ($$v) {_vm.$set(_vm.formItem, \"assigned\", $$v)},expression:\"formItem.assigned\"}},_vm._l((_vm.fetchData.assigned),function(i){return _c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(i))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"定时执行\"}},[_c('DatePicker',{attrs:{\"format\":\"yyyy-MM-dd HH:mm\",\"type\":\"datetime\",\"placeholder\":\"选择时间点\",\"options\":_vm.invalidDate,\"editable\":false},on:{\"on-change\":function($event){_vm.formItem.delay=$event}},model:{value:(_vm.formItem.delay),callback:function ($$v) {_vm.$set(_vm.formItem, \"delay\", $$v)},expression:\"formItem.delay\"}})],1),_c('FormItem',{attrs:{\"label\":\"是否备份\",\"prop\":\"backup\"}},[_c('RadioGroup',{model:{value:(_vm.formItem.backup),callback:function ($$v) {_vm.$set(_vm.formItem, \"backup\", $$v)},expression:\"formItem.backup\"}},[_c('Radio',{attrs:{\"label\":1}},[_vm._v(\"是\")]),_c('Radio',{attrs:{\"label\":0}},[_vm._v(\"否\")])],1)],1)],1)],1)])],1),_c('Col',{staticClass:\"padding-left-10\",attrs:{\"span\":\"18\"}},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Icon',{attrs:{\"type\":\"md-remove\"}}),_vm._v(\"\\n          填写SQL语句\\n        \")],1),_c('div',{staticClass:\"edittable-table-height-con\"},[_c('Tabs',{attrs:{\"value\":_vm.tabs}},[_c('TabPane',{attrs:{\"label\":\"填写SQL语句\",\"name\":\"order1\",\"icon\":\"md-code\"}},[_c('Form',[_c('FormItem',[_c('editor',{on:{\"init\":_vm.editorInit,\"setCompletions\":_vm.setCompletions},model:{value:(_vm.formDynamic),callback:function ($$v) {_vm.formDynamic=$$v},expression:\"formDynamic\"}})],1),_c('FormItem',[_c('Table',{attrs:{\"columns\":_vm.testColumns,\"data\":_vm.testResults,\"highlight-row\":\"\"}})],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.testSql}},[_vm._v(\"检测语句\")]),_c('Button',{staticClass:\"margin-left-10\",attrs:{\"type\":\"info\",\"loading\":_vm.loading},on:{\"click\":_vm.merge}},[_vm._v(\"ALTER语句合并\")]),_c('Button',{staticClass:\"margin-left-10\",attrs:{\"type\":\"warning\",\"loading\":_vm.loading},on:{\"click\":_vm.beauty}},[_vm._v(\"美化\")]),_c('Button',{staticClass:\"margin-left-10\",attrs:{\"type\":\"success\",\"disabled\":_vm.validate_gen},on:{\"click\":_vm.commitOrder}},[_vm._v(\"提交工单\\n                  \")])],1)],1)],1),_c('TabPane',{attrs:{\"label\":\"表结构详情\",\"name\":\"order2\",\"icon\":\"md-folder\"}},[_c('Table',{attrs:{\"columns\":_vm.fieldColumns,\"data\":_vm.fieldData}})],1),_c('TabPane',{attrs:{\"label\":\"索引详情\",\"name\":\"order3\",\"icon\":\"md-folder\"}},[_c('Table',{attrs:{\"columns\":_vm.idxColums,\"data\":_vm.idxData}})],1)],1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style lang=\"less\" scoped>\n  @import \"../../styles/common.less\";\n  @import \"../../styles/table.less\";\n\n  p {\n    word-wrap: break-word;\n    word-break: break-all;\n    overflow: hidden;\n  }\n</style>\n<template>\n  <div>\n    <Row>\n      <Col span=\"6\">\n        <Card>\n          <p slot=\"title\">\n            <Icon type=\"ios-redo\"></Icon>\n            选择数据库\n          </p>\n          <div class=\"edittable-test-con\">\n            <Form :model=\"formItem\" :label-width=\"100\" ref=\"formItem\" :rules=\"ruleValidate\">\n              <Form-item label=\"环境:\" prop=\"idc\">\n                <Select v-model=\"formItem.idc\" placeholder=\"请选择\" @on-change=\"fetchSource\">\n                  <Option v-for=\"i in fetchData.idc\" :value=\"i\" :key=\"i\">{{i}}</Option>\n                </Select>\n              </Form-item>\n              <Form-item label=\"连接名称:\" prop=\"source\">\n                <Select\n                        v-model=\"formItem.source\"\n                        placeholder=\"请选择\"\n                        @on-change=\"fetchBase\"\n                >\n                  <Option\n                          v-for=\"i in fetchData.source\"\n                          :value=\"i\"\n                          :key=\"i\"\n                  >{{ i }}\n                  </Option>\n                </Select>\n              </Form-item>\n              <Form-item label=\"数据库库名:\" prop=\"database\">\n                <Select\n                        v-model=\"formItem.database\"\n                        placeholder=\"请选择\"\n                        @on-change=\"fetchTable\"\n                >\n                  <Option v-for=\"item in fetchData.base\" :value=\"item\" :key=\"item\">{{item}}</Option>\n                </Select>\n              </Form-item>\n              <Form-item label=\"数据库表名:\">\n                <Select v-model=\"formItem.table\" placeholder=\"请选择\">\n                  <Option v-for=\"item in fetchData.table\" :value=\"item\" :key=\"item\">{{item}}</Option>\n                </Select>\n              </Form-item>\n              <Form-item>\n                <Button type=\"primary\" @click=\"fetchStruct()\">获取表结构信息</Button>\n                <Button type=\"error\" @click=\"clearForm()\" class=\"margin-left-10\">重置</Button>\n              </Form-item>\n              <FormItem label=\"工单提交说明:\" prop=\"text\">\n                <Input v-model=\"formItem.text\" placeholder=\"请输入工单说明\" type=\"textarea\" :rows=4></Input>\n              </FormItem>\n              <FormItem label=\"审核人:\" prop=\"assigned\">\n                <Select v-model=\"formItem.assigned\" transfer>\n                  <Option v-for=\"i in fetchData.assigned\" :value=\"i\" :key=\"i\">{{i}}</Option>\n                </Select>\n              </FormItem>\n              <FormItem label=\"定时执行\">\n                <DatePicker format=\"yyyy-MM-dd HH:mm\" type=\"datetime\" placeholder=\"选择时间点\" :options=\"invalidDate\"\n                            :editable=\"false\"\n                            v-model=\"formItem.delay\" @on-change=\"formItem.delay=$event\"></DatePicker>\n              </FormItem>\n              <FormItem label=\"是否备份\" prop=\"backup\">\n                <RadioGroup v-model=\"formItem.backup\">\n                  <Radio :label=1>是</Radio>\n                  <Radio :label=0>否</Radio>\n                </RadioGroup>\n              </FormItem>\n            </Form>\n          </div>\n        </Card>\n      </Col>\n      <Col span=\"18\" class=\"padding-left-10\">\n        <Card>\n          <p slot=\"title\">\n            <Icon type=\"md-remove\"></Icon>\n            填写SQL语句\n          </p>\n          <div class=\"edittable-table-height-con\">\n            <Tabs :value=\"tabs\">\n              <TabPane label=\"填写SQL语句\" name=\"order1\" icon=\"md-code\">\n                <Form>\n                  <FormItem>\n                    <editor\n                            v-model=\"formDynamic\"\n                            @init=\"editorInit\"\n                            @setCompletions=\"setCompletions\"\n                    ></editor>\n                  </FormItem>\n                  <FormItem>\n                    <Table :columns=\"testColumns\" :data=\"testResults\" highlight-row></Table>\n                  </FormItem>\n                  <FormItem>\n                    <Button type=\"primary\" @click=\"testSql\" :loading=\"loading\">检测语句</Button>\n                    <Button type=\"info\" @click=\"merge\" :loading=\"loading\" class=\"margin-left-10\">ALTER语句合并</Button>\n                    <Button type=\"warning\" @click=\"beauty\" :loading=\"loading\" class=\"margin-left-10\">美化</Button>\n                    <Button\n                            type=\"success\"\n                            class=\"margin-left-10\"\n                            @click=\"commitOrder\"\n                            :disabled=\"validate_gen\"\n                    >提交工单\n                    </Button>\n                  </FormItem>\n                </Form>\n              </TabPane>\n              <TabPane label=\"表结构详情\" name=\"order2\" icon=\"md-folder\">\n                <Table :columns=\"fieldColumns\" :data=\"fieldData\"></Table>\n              </TabPane>\n              <TabPane label=\"索引详情\" name=\"order3\" icon=\"md-folder\">\n                <Table :columns=\"idxColums\" :data=\"idxData\"></Table>\n              </TabPane>\n            </Tabs>\n          </div>\n        </Card>\n      </Col>\n    </Row>\n  </div>\n</template>\n\n<script>\n    //\n    import axios from 'axios'\n    import editor from '../../components/editor'\n    import {fetchSth,order} from \"../../libs/mixin\";\n\n    export default {\n        components: {\n            editor: editor\n        },\n        mixins: [fetchSth,order],\n        data() {\n            return {\n                formItem: {\n                    text: '',\n                    idc: '',\n                    source: '',\n                    database: '',\n                    table: '',\n                    backup: 1,\n                    assigned: '',\n                    delay: null\n                },\n                tabs: 'order1',\n                formDynamic: '',\n                validate_gen: true,\n                wordList: [],\n                testResults: [],\n                fieldColumns: [\n                    {\n                        title: '字段名',\n                        key: 'Field'\n                    },\n                    {\n                        title: '字段类型',\n                        key: 'Type',\n                        editable: true\n                    },\n                    {\n                        title: '字段是否为空',\n                        key: 'Null',\n                        editable: true,\n                        option: true\n                    },\n                    {\n                        title: '默认值',\n                        key: 'Default',\n                        editable: true\n                    },\n                    {\n                        title: '备注',\n                        key: 'Comment'\n                    }\n                ],\n                fieldData: [],\n                idxColums: [\n                    {\n                        title: '索引名称',\n                        key: 'IndexName'\n                    },\n                    {\n                        title: '是否唯一索引',\n                        key: 'NonUnique'\n                    },\n                    {\n                        title: '字段名',\n                        key: 'ColumnName'\n                    }\n                ],\n                idxData: [],\n                loading: false\n            }\n        },\n        methods: {\n            fetchSource(idc) {\n                if (idc) {\n                    axios.get(`${this.$config.url}/fetch/source/${idc}/ddl`)\n                        .then(res => {\n                            if (res.data.x === 'ddl') {\n                                this.fetchData.source = res.data.source;\n                                this.fetchData.assigned = res.data.assigned\n                            } else {\n                                this.$config.notice('非法劫持参数！')\n                            }\n                        })\n                        .catch(error => {\n                            this.$config.err_notice(this, error)\n                        })\n                }\n            },\n            merge() {\n                axios.put(`${this.$config.url}/query/merge`, {\n                    'sql': this.formDynamic\n                })\n                    .then(res => {\n                        if (!res.data.e) {\n                            this.formDynamic = res.data.sols\n                        } else {\n                            this.$config.notice(res.err)\n                        }\n                    })\n                    .catch(err => this.$config.err_notice(this, err))\n            },\n            beauty() {\n                axios.put(`${this.$config.url}/query/beauty`, {\n                    'sql': this.formDynamic\n                })\n                    .then(res => {\n                        this.formDynamic = res.data\n                    })\n                    .catch(err => this.$config.err_notice(this, err))\n            },\n            fetchStruct() {\n                this.$refs['formItem'].validate((valid) => {\n                    if (valid) {\n                        this.$Spin.show({\n                            render: (h) => {\n                                return h('div', [\n                                    h('Icon', {\n                                        props: {\n                                            size: 30,\n                                            type: 'ios-loading'\n                                        },\n                                        style: {\n                                            animation: 'ani-demo-spin 1s linear infinite'\n                                        }\n                                    }),\n                                    h('div', '数据库连接中,请稍后........')\n                                ])\n                            }\n                        });\n                        axios.put(`${this.$config.url}/fetch/tableinfo`, {\n                            'source': this.formItem.source,\n                            'base': this.formItem.database,\n                            'table': this.formItem.table\n                        })\n                            .then(res => {\n                                this.fieldData = res.data.f;\n                                this.idxData = res.data.i;\n                                this.$Spin.hide()\n                            })\n                            .catch(() => {\n                                this.$config.err_notice(this, '连接失败！详细信息请查看日志')\n                                this.$Spin.hide()\n                            })\n                    } else {\n                        this.$Message.error('表单验证失败!')\n                    }\n                })\n            },\n            testSql() {\n                this.$refs['formItem'].validate((valid) => {\n                    if (valid) {\n                        this.loading = true;\n                        axios.put(`${this.$config.url}/fetch/test`, {\n                            'source': this.formItem.source,\n                            'database': this.formItem.database,\n                            'table': this.formItem.table,\n                            'sql': this.formDynamic,\n                            'isDMl': false\n                        })\n                            .then(res => {\n                                this.testResults = res.data;\n                                let gen = 0;\n                                this.testResults.forEach(vl => {\n                                    if (vl.Level !== 0) {\n                                        gen += 1\n                                    }\n                                });\n                                if (gen === 0) {\n                                    this.validate_gen = false\n                                } else {\n                                    this.validate_gen = true\n                                }\n                                this.loading = false\n                            })\n                            .catch(err => {\n                                this.loading = false;\n                                this.$config.err_notice(this, err)\n                            })\n                    } else {\n                        this.$Message.error('请填写具体地址或sql语句后再测试!')\n                    }\n                })\n            },\n            commitOrder() {\n                this.$refs['formItem'].validate((valid) => {\n                    if (valid) {\n                        axios.post(`${this.$config.url}/sql/refer`, {\n                            'ddl': this.formItem,\n                            'sql': this.formDynamic,\n                            'ty': 0\n                        })\n                            .then(res => {\n                                this.validate_gen = true;\n                                this.$Notice.success({\n                                    title: '成功',\n                                    desc: res.data\n                                })\n                            })\n                            .catch(error => {\n                                this.validate_gen = true;\n                                this.$config.err_notice(this, error)\n                            })\n                    }\n                })\n            }\n        },\n        mounted() {\n            for (let i of this.$config.highlight.split('|')) {\n                this.wordList.push({'vl': i, 'meta': '关键字'})\n            }\n            this.fetchIDC();\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ddlOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ddlOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ddlOrder.vue?vue&type=template&id=0e0ea533&scoped=true&\"\nimport script from \"./ddlOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./ddlOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ddlOrder.vue?vue&type=style&index=0&id=0e0ea533&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e0ea533\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ddlOrder.vue?vue&type=style&index=0&id=0e0ea533&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ddlOrder.vue?vue&type=style&index=0&id=0e0ea533&lang=less&scoped=true&\""],"sourceRoot":""}