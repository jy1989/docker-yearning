(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3983a0a4"],{c64d:function(t,e,s){"use strict";var a=s("ec55"),o=s.n(a);o.a},cbde:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",[s("Col",{attrs:{span:"24"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"md-settings"}}),t._v("\n          基础设置\n        ")],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("消息推送")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"钉钉webhook:"}},[s("Input",{attrs:{placeholder:"此webhook只用于查询工单,权限工单的消息推送。"},model:{value:t.message.web_hook,callback:function(e){t.$set(t.message,"web_hook",e)},expression:"message.web_hook"}})],1),s("FormItem",{attrs:{label:"邮件SMTP服务地址:"}},[s("Input",{attrs:{placeholder:"STMP服务 地址"},model:{value:t.message.host,callback:function(e){t.$set(t.message,"host",e)},expression:"message.host"}})],1),s("FormItem",[s("Checkbox",{model:{value:t.message.ssl,callback:function(e){t.$set(t.message,"ssl",e)},expression:"message.ssl"}},[t._v("启用ssl端口")])],1),s("FormItem",{attrs:{label:"SMTP服务端口:"}},[s("Input",{attrs:{placeholder:"STMP服务 端口"},model:{value:t.message.port,callback:function(e){t.$set(t.message,"port",e)},expression:"message.port"}})],1),s("FormItem",{attrs:{label:"邮件推送人用户名:"}},[s("Input",{attrs:{placeholder:"推送人 用户名"},model:{value:t.message.user,callback:function(e){t.$set(t.message,"user",e)},expression:"message.user"}})],1),s("FormItem",{attrs:{label:"邮件推送人密码:"}},[s("Input",{attrs:{placeholder:"推送人 密码",type:"password"},model:{value:t.message.password,callback:function(e){t.$set(t.message,"password",e)},expression:"message.password"}})],1),s("FormItem",{attrs:{label:"邮件测试收件地址::"}},[s("Input",{attrs:{placeholder:"测试收件人地址填写"},model:{value:t.message.to_user,callback:function(e){t.$set(t.message,"to_user",e)},expression:"message.to_user"}})],1),s("Form-item",{attrs:{label:"email推送开关:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.mail_switching},model:{value:t.message.mail,callback:function(e){t.$set(t.message,"mail",e)},expression:"message.mail"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("Form-item",{attrs:{label:"钉钉推送开关:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.dingding_switching},model:{value:t.message.ding,callback:function(e){t.$set(t.message,"ding",e)},expression:"message.ding"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.dingding_test()}}},[t._v("钉钉测试")]),s("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(e){return t.mail_test()}}},[t._v("邮件测试")])],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Card",{staticStyle:{"margin-left":"5%"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("LDAP设置")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"服务地址url"}},[s("Input",{attrs:{placeholder:"[ip地址或者域名]:[端口号]"},model:{value:t.ldap.url,callback:function(e){t.$set(t.ldap,"url",e)},expression:"ldap.url"}})],1),s("FormItem",[s("Checkbox",{model:{value:t.ldap.ldaps,callback:function(e){t.$set(t.ldap,"ldaps",e)},expression:"ldap.ldaps"}},[t._v("启用ldaps")])],1),s("FormItem",{attrs:{label:"LDAP管理员DN:"}},[s("Input",{attrs:{placeholder:"请填写管理员DN"},model:{value:t.ldap.user,callback:function(e){t.$set(t.ldap,"user",e)},expression:"ldap.user"}})],1),s("FormItem",{attrs:{label:"LDAP管理员密码:"}},[s("Input",{attrs:{placeholder:"请填写管理员密码",type:"password"},model:{value:t.ldap.password,callback:function(e){t.$set(t.ldap,"password",e)},expression:"ldap.password"}})],1),s("FormItem",{attrs:{label:"LDAP_Search filter:"}},[s("Select",{model:{value:t.ldap.type,callback:function(e){t.$set(t.ldap,"type",e)},expression:"ldap.type"}},[s("Option",{attrs:{value:1}},[t._v("sAMAccountName")]),s("Option",{attrs:{value:2}},[t._v("uid")]),s("Option",{attrs:{value:3}},[t._v("cn")])],1)],1),s("FormItem",{attrs:{label:"LDAP_SCBASE:"}},[s("Input",{attrs:{placeholder:"LDAP Search Base"},model:{value:t.ldap.sc,callback:function(e){t.$set(t.ldap,"sc",e)},expression:"ldap.sc"}})],1),s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.ldap_test()}}},[t._v("ldap测试")])],1)],1),s("br"),s("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"info","show-icon":""}},[t._v("\n              注意事项：\n              "),s("template",{slot:"desc"},[t._v("\n                1.LDAP登录用户名，必须全局唯一。\n              ")])],2)],1)],1)],1)],1)],1),s("br"),s("Row",[s("Col",{attrs:{span:"24"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"android-settings"}}),t._v("\n          进阶设置\n        ")],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("Card",{staticStyle:{"margin-left":"5%"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("其他")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"查询最大Limit限制:"}},[s("Input",{attrs:{placeholder:"查询最大的Limit数。"},model:{value:t.other.limit,callback:function(e){t.$set(t.other,"limit",e)},expression:"other.limit"}})],1),s("FormItem",{attrs:{label:"自定义环境:"}},[t._l(t.other.idc,function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose2}},[t._v(t._s(e)+"\n                  ")])}),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"环境名称"},model:{value:t.other.foce,callback:function(e){t.$set(t.other,"foce",e)},expression:"other.foce"}}),s("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd}},[t._v("添加环境")])],2),s("FormItem",{attrs:{label:"排除数据库:"}},[t._l(t.other.exclude_db_list,function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose_exclued_db}},[t._v(t._s(e)+"\n                  ")])}),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"排除数据库"},model:{value:t.other.exclued_db,callback:function(e){t.$set(t.other,"exclued_db",e)},expression:"other.exclued_db"}}),s("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd_exclued_db}},[t._v("添加排除数据库\n                  ")])],2),s("FormItem",{attrs:{label:"脱敏字段:"}},[t._l(t.other.insulate_word_list,function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose3}},[t._v(t._s(e)+"\n                  ")])}),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"脱敏字段设置"},model:{value:t.other.sensitive,callback:function(e){t.$set(t.other,"sensitive",e)},expression:"other.sensitive"}}),s("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd1}},[t._v("添加脱敏字段")])],2),s("Row",[s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"多级审核:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.multi_switching},model:{value:t.other.multi,callback:function(e){t.$set(t.other,"multi",e)},expression:"other.multi"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"查询审核:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.multi_query},model:{value:t.other.query,callback:function(e){t.$set(t.other,"query",e)},expression:"other.query"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"权限申请限制:"}},[s("InputNumber",{attrs:{max:10,min:1,formatter:function(t){return t+"次/每天"}},model:{value:t.other.per_order,callback:function(e){t.$set(t.other,"per_order",e)},expression:"other.per_order"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"注册:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.multi_register},model:{value:t.other.register,callback:function(e){t.$set(t.other,"register",e)},expression:"other.register"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"查询导出:"}},[s("i-switch",{attrs:{size:"large"},on:{"on-change":t.multi_export},model:{value:t.other.export,callback:function(e){t.$set(t.other,"export",e)},expression:"other.export"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"8"}},[s("Form-item",{attrs:{label:"查询时限:"}},[s("InputNumber",{attrs:{max:600,min:0,formatter:function(t){return t+"分钟"}},model:{value:t.other.ex_query_time,callback:function(e){t.$set(t.other,"ex_query_time",e)},expression:"other.ex_query_time"}})],1)],1)],1)],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning","show-icon":""}},[t._v("\n              注意事项：\n              "),s("template",{slot:"desc"},[t._v("\n                1.由于各个邮件服务提供商对于垃圾邮件过滤的机制各不相同，可能会造成邮件无法接收的情况。所以使用前请测试是否稳定。\n                "),s("br"),t._v("\n                2.只有开启相应的消息推送开关后，消息推送才会开启。\n                "),s("br"),t._v("\n                3.设置最大Limit数后，所有的查询语句的查询结果都不会超过这个数值。\n                "),s("br"),t._v("\n                4.开启多级审核开关后,用户组将新增执行人角色，只有执行人角色的用户才能最终执行工单。关闭后执行人角色用户将全部更改为使用者\n                "),s("br"),t._v("\n                5.查询审核开关开启后，所有的查询都必须通过管理员同意才能进行。关闭则可自主查询\n                "),s("br"),t._v("\n                6.设置脱敏字段后，查询时如匹配到对应字段则该字段将只会以******显示\n              ")])],2),s("Button",{staticStyle:{"margin-left":"5%",width:"95%"},attrs:{type:"primary"},on:{click:t.save_upload}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},o=[],l=(s("ac4d"),s("8a81"),s("ac6a"),s("bc3a")),r=s.n(l),n={name:"Setting",data:function(){return{ldap:Object,message:Object,other:{limit:0,per_order:0}}},methods:{handleAdd:function(){var t=!0,e=!1,s=void 0;try{for(var a,o=this.other.idc[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if(l===this.other.foce)return void this.$Message.error("请勿添加相同环境！")}}catch(r){e=!0,s=r}finally{try{t||null==o.return||o.return()}finally{if(e)throw s}}this.other.idc.push(this.other.foce),this.other.foce=""},handleAdd1:function(){var t=!0,e=!1,s=void 0;try{for(var a,o=this.other.insulate_word_list[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if(l===this.other.sensitive)return void this.$Message.error("请勿添加相同脱敏字段！")}}catch(r){e=!0,s=r}finally{try{t||null==o.return||o.return()}finally{if(e)throw s}}this.other.insulate_word_list.push(this.other.sensitive),this.other.sensitive=""},handleAdd_exclued_db:function(){var t=!0,e=!1,s=void 0;try{for(var a,o=this.other.exclude_db_list[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if(l===this.other.exclued_db)return void this.$Message.error("请勿添加相同数据库！")}}catch(r){e=!0,s=r}finally{try{t||null==o.return||o.return()}finally{if(e)throw s}}this.other.exclude_db_list.push(this.other.exclued_db),this.other.exclued_db=""},handleClose2:function(t,e){var s=this.other.idc.indexOf(e);this.other.idc.splice(s,1)},handleClose3:function(t,e){var s=this.other.insulate_word_list.indexOf(e);this.other.insulate_word_list.splice(s,1)},handleClose_exclued_db:function(t,e){var s=this.other.exclude_db_list.indexOf(e);this.other.exclude_db_list.splice(s,1)},multi_switching:function(t){this.other.multi=t},multi_register:function(t){this.other.register=t},multi_export:function(t){this.other.export=t},multi_query:function(t){this.other.query=t},dingding_switching:function(t){this.message.ding=t},mail_switching:function(t){this.message.mail=t},ldap_test:function(){var t=this;r.a.put("".concat(this.$config.url,"/group/setting/test/ldap"),{ldap:this.ldap}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})},dingding_test:function(){var t=this;this.message.port=parseInt(this.message.port),r.a.put("".concat(this.$config.url,"/group/setting/test/ding"),{mail:this.message}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})},mail_test:function(){var t=this;this.message.port=parseInt(this.message.port),r.a.put("".concat(this.$config.url,"/group/setting/test/mail"),{mail:this.message}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})},save_upload:function(){var t=this;this.message.port=parseInt(this.message.port),r.a.post("".concat(this.$config.url,"/group/setting/add"),{ldap:this.ldap,message:this.message,other:this.other}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})}},mounted:function(){var t=this;r.a.get("".concat(this.$config.url,"/group/setting")).then(function(e){t.message=e.data.Message,t.other=e.data.Other,t.ldap=e.data.Ldap}).catch(function(e){t.$config.err_notice(t,e)})}},i=n,c=(s("c64d"),s("2877")),u=Object(c["a"])(i,a,o,!1,null,"c091d21e",null);e["default"]=u.exports},ec55:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3983a0a4.0b4e31f2.js.map